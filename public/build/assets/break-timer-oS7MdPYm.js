document.addEventListener("alpine:init",()=>{Alpine.data("breakTimer",()=>({timeLeft:0,interval:null,notification:null,init(){this.setupNotifications(),window.addEventListener("start-break-timer",t=>{this.startTimer(t.detail.duration)}),window.addEventListener("stop-break-timer",()=>{this.stopTimer()})},setupNotifications(){"Notification"in window&&Notification.requestPermission()},startTimer(t){this.timeLeft=t,this.interval=setInterval(()=>{this.timeLeft--,this.timeLeft<=0&&(this.stopTimer(),this.notifyBreakTime())},1e3)},stopTimer(){this.interval&&(clearInterval(this.interval),this.interval=null)},notifyBreakTime(){Notification.permission==="granted"&&(this.notification=new Notification("Time for a Break!",{body:"Take a moment to rest and recharge.",icon:"/path-to-your-icon.png",silent:!1}),setTimeout(()=>{this.notification&&this.notification.close()},3e4)),window.dispatchEvent(new CustomEvent("break-timer-complete"))},formatTime(){const t=Math.floor(this.timeLeft/60),i=this.timeLeft%60;return`${t}:${i.toString().padStart(2,"0")}`}}))});
